<header>
  <% if user_signed_in? %>
    <div>Currently signed in as: <%= current_user.username %></div>
    <div><%= link_to 'Edit Account', edit_user_registration_path %></div>
    <div><%= link_to 'Sign Out', destroy_user_session_path, data: { turbo_method: :delete } %></div>
  <% else %>
    <div>Want to join the clubhouse? <%= link_to 'Sign Up', new_user_registration_path %></div>
    <div>Already a member? <%= link_to 'Sign In', new_user_session_path %></div>
  <% end %>

  <div class="sort-select">
    <p>Sort by:</p>
    <%= form_with method: :get do |form| %>
      <%= form.select :sort, 
          [['Newest to Oldest', 'new'], ['Oldest to Newest', 'old']], 
          { selected: @sort },
          { onchange: 'this.form.submit()' } %>
    <% end %>
  </div>
</header>

<h2>Members Only! Posts</h2>
<% if user_signed_in? %>
  <div><%= link_to 'Write A New Post', new_post_path %></div>
<% end %>

<% @posts.each do |post| %>
  <div class="post">
    <h3 class="title"><%= post.title %></h3>
    <% if user_signed_in? %>
      <h4 class="author">Author: <%= post.user.username %></h4>
    <% end %>
    <h4 class="date">Post Date: <%= post.created_at.to_date %></h4>
    <div class="body">
      <%= post.body %>
    </div>
  </div>
<% end %>
